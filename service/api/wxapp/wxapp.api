info(
	title: "小程序端 api"
	desc: "小程序端 api"
	author: "kyle"
	email: "skywalkerwei@gmail.com"
)

//import "desc/carts.api"
import(
	"desc/shop.api"
	"desc/product.api"
	"desc/carts.api"
	"desc/order.api"
	"desc/pay.api"
	"desc/user.api"
	"desc/other.api"
)

type (
	// 用户登录
	LoginRequest {
		Mobile   string `json:"mobile"`
		Password string `json:"password"`
	}
	LoginResponse {
		AccessToken  string `json:"accessToken"`
		AccessExpire int64  `json:"accessExpire"`
	}
	// 用户登录

	// 用户注册
	RegisterRequest {
		Name     string `json:"name"`
		Gender   int64  `json:"gender"`
		Mobile   string `json:"mobile"`
		Password string `json:"password"`
	}
	RegisterResponse {
		Id     int64  `json:"id"`
		Name   string `json:"name"`
		Gender int64  `json:"gender"`
		Mobile string `json:"mobile"`
	}
	// 用户注册

	// 用户信息
	UserInfoResponse {
		Id     int64  `json:"id"`
		Name   string `json:"name"`
		Gender int64  `json:"gender"`
		Mobile string `json:"mobile"`
	}
	// 用户信息
)

service WxApp {
	@doc(
		summary: "登录"
	)
	@handler Login
	post /api/user/login(LoginRequest) returns (LoginResponse)
	
	@doc(
		summary: "注册"
	)
	@handler Register
	post /api/user/register(RegisterRequest) returns (RegisterResponse)
}

@server(
	jwt: Auth
)
service WxApp {
	@doc(
		summary: "获取用户信息"
	)
	@handler UserInfo
	post /api/user/userinfo returns (UserInfoResponse)
}